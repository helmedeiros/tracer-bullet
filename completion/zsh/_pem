#compdef pem

# Autocomplete plugin for Oh-My-Zsh
# Requires: Pem scripts (http://github.com/helmedeiros/pem-scripts.git)

local -a _1st_arguments
_1st_arguments=(
  "configure":"optional configurations"
  "commit":"easy commit for configured projects"
  "pair":"Configure pairing informations"
  "story\:commits":"list all commits for a story #"
  "story\:files":"list all files modified for a story #"
  "story\:diary":"add to jira as coments the commit from current day for a story #"
  "story\:diff":"diff all changed files for a story #"
  "--version":"show pete client version"
  "--help":"show pete client help"
)

_arguments '*:: :->command'

if (( CURRENT == 1 )); then
  _describe -t commands "pete command" _1st_arguments
  return
fi

local -a _command_args
case "$words[1]" in
    configure)
    _command_args=(
      '(-a|--autocomplete)'{-a,--autocomplete}'[configure autocomplete]' \
      '(-j|--jira)'{-j,--jira}'[configure jira credentials]' \
      '(-p|--project)'{-p,--project}'[configure project]' \
    )
    ;;
  pair)
    _command_args=(
    '(-w|--with)'{-w,--with}'[Im pairing with #]' \
    '(-s|--story)'{-s,--story}'[Im pairing on story #]' \
    )
    ;;

esac

_arguments \
  $_command_args \
  &&  return 0
